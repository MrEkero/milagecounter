<!DOCTYPE html>
<!-- This code was developed using Developer Tools AI assistance in Chrome with prompts from Mr. EkerÖ 

Leased car with a 3-year contract. Start date: 14/10/2024. According to the contract,
a maximum of 30,000 kilometers is allowed during the entire leasing period. 
This website helps me keep track of how far I should have driven up to today's 
date to not exceed the agreed 30,000 kilometers over 3 years.
 -->

<html>
<head>
  <title>The permitted mileage for today's date</title>
      <style>
        body, html {
            height: 100%;
            margin: 0;
            display: flex;
            justify-content: center; 
            align-items: center;    
        }
        .centered-text {
            text-align: center;
        }
    body {
      color: white;
      background-color: black; 
    }
    </style>
</head>


  <font size="7">
    <div class="centered-text">
   <p style="font-size: 12px;">Leasingbil uttagen 14 oktober 2024.<br>Max körsträcka på 3 år: 3000 mil</p>
 
   
  <p>Rekommenderad körsträcka<br>fram till dagens datum</p>
  <div id="output"></div>

  <script>
  const startDate = new Date('2024-10-13');
  const endDate = new Date(startDate);
  endDate.setFullYear(endDate.getFullYear() + 3);

  const data = [];
  const totalDays = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24));
  const integerIncrement = 3000 / totalDays;

  for (let i = 0; i <= totalDays; i++) {
    const currentDate = new Date(startDate);
    currentDate.setDate(currentDate.getDate() + i);
    const dateStr = currentDate.toISOString().slice(0, 10);
    const integer = (integerIncrement * i).toFixed(2);
    data.push({ date: dateStr, integer: parseFloat(integer) });
  }

  const today = new Date().toISOString().slice(0, 10);
  const todaysData = data.find(row => row.date === today);

  if (todaysData) {
    const output = `${todaysData.date}<br>${todaysData.integer} mil`;
    document.getElementById('output').innerHTML = output;
  } else {
    document.getElementById('output').innerHTML = 'No data found for today\'s date.';
  }


// Add an input field for the start date
const startDateInput = document.createElement('input');
startDateInput.type = 'date';
startDateInput.id = 'startDate';
startDateInput.value = '2024-10-14'; // Default value

// Add a label for the input field
const startDateLabel = document.createElement('label');
startDateLabel.htmlFor = 'startDate';
startDateLabel.textContent = 'Start Date:';

// Insert the input field and label before the output div
const outputDiv = document.getElementById('output');
outputDiv.parentNode.insertBefore(startDateLabel, outputDiv);
outputDiv.parentNode.insertBefore(startDateInput, outputDiv);

// Update the calculation logic to use the new start date
const script = document.querySelector('script');
script.textContent = `
  const startDateInput = document.getElementById('startDate');
  const outputDiv = document.getElementById('output');

  startDateInput.addEventListener('change', () => {
    const startDate = new Date(startDateInput.value);
    const today = new Date();
    const timeDiff = today.getTime() - startDate.getTime();
    const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
    const totalDays = 3 * 365; // 3 years
    const kmPerDay = 30000 / totalDays;
    const expectedKm = Math.round(kmPerDay * daysDiff);

    outputDiv.textContent = 'Expected kilometers driven: ' + expectedKm;
  });

  // Trigger the calculation initially
  startDateInput.dispatchEvent(new Event('change'));
`;
   
</script>
     </div>
    </font>
</body>
</html>
